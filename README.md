# Тестовое задание для компании Релэкс
# Описание проекта
Данный проект представляет собой сервис для обслуживания фермы, взаимодействие происходит с помощью REST-запросов. Реализован на языке Java с использованием фреймворка <b>Spring Boot</b> и базы данных <b>PostgreSQL</b>. 
Данные, отправляемые и получаемые приложением, представлены в формате <b>JSON</b>.
# Стек технологий
<li>Java</li>
<li>Maven</li>
<li>Spring Boot</li>
<li>Spring Security</li>
<li>PostgreSQL</li>
<li>Liquibase</li>
<li>Lombok</li>

# Реализованные требования
## Администратор
  <ul>
    <li>Администратор может регистрировать новых работников</li>
    <li>Администратор может удалять работников</li>
    <li>Администратор может регистрировать новые товары</li>
    <li>Администратор может просматривать статистику по собранным товарам за конкретный день или месяц</li>
      <ul>
        <li>По конкретному работнику</li>
        <li>По ферме в целом</li>
      </ul>
    <li>Администратор получает на почту ежедневный отчет по собранным товарам за день</li>
    <li>Администратор может ставить оценки работникам за день</li>
    <li>Администратор может задавать норму сбора урожая для конкретного работника</li>
  </ul>

 ## Работник
   <ul>
     <li>Работник может собирать товары</li>
     <li>Работник может посмотреть свою оценку, поставленную администратором</li>
     <li>Работник может посмотреть свою норму сбора урожая, заданную администратором</li>
   </ul>
   
# Детали реализации
<li>Данные администратора создаются в базе данных при первом запуске программы(с помощью liquibase)</li>
<li>Есть хеширование паролей</li>
<li>Информация о сессии хранится в Json Web Token и передается в HTTP хэдерах</li>
<li>В качестве базы данных была использована PostgreSQL</li>

# ER-модель базы данных
# Примеры REST-запросов
## Логин
```
POST /auth/login
Content-Type: application/json

{
  "email": "relex@gmail.com",
  "password": "admin"
}
```
Ответ в случае успешного логина:
```
{
  "accessToken": <token>,
  "refreshToken": <refreshToken>
}
```
## Регистрация работника
```
POST /admin/register-employee
Required-role: ADMIN

{
  "firstName": "Oleg",
  "lastName": "Nelezin",
  "patronymic": "Yurievich",
  "email": "astravsu@gmail.com",
  "password": 123
}
```
Ответ в случае успешной регистрации:
```
{
    "firstName": "Oleg",
    "lastName": "Nelezin",
    "patronymic": "Yurievich",
    "email": "astravsu@gmail.com"
}
```
## Удаление работника
```
POST /admin/delete-employee
Required-role: ADMIN

{
  "email": "astravsu@gmail.com
}
```
Ответ в случае успешного удаления:
```
{
  "message": "Employee has been deleted."
}
```
